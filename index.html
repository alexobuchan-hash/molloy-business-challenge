<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#950423">

    <title>Molloy Business Challenge</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --molloy-maroon: #950423;
            --molloy-gold: #D6C172;
            --bg-color: #f4f4f9;
            --text-dark: #333;
            --white: #ffffff;
            --gray-light: #e0e0e0;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* --- SCREEN VISIBILITY --- */
        .screen {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-color: var(--bg-color);
            display: none; /* Hidden by default */
            flex-direction: column;
            z-index: 10;
        }

        .screen.active {
            display: flex;
        }

        /* --- LOGIN SCREEN --- */
        #login-screen {
            background: var(--molloy-maroon);
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            z-index: 100; /* Always on top */
        }

        .login-logo { font-size: 80px; color: var(--molloy-gold); margin-bottom: 20px; }
        .login-title { font-size: 28px; font-weight: bold; margin-bottom: 40px; text-transform: uppercase; letter-spacing: 1px; }

        .input-group { width: 80%; max-width: 300px; margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; font-size: 12px; margin-bottom: 5px; color: rgba(255,255,255,0.7); }
        .login-input { width: 100%; padding: 15px; border-radius: 8px; border: 2px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; font-size: 16px; outline: none; }
        .login-input:focus { border-color: var(--molloy-gold); background: rgba(255,255,255,0.2); }

        .btn { border: none; padding: 15px; border-radius: 30px; font-size: 16px; font-weight: bold; cursor: pointer; width: 80%; max-width: 300px; margin-top: 10px; transition: transform 0.1s; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background-color: var(--molloy-gold); color: var(--molloy-maroon); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .btn-google { background-color: white; color: #333; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 15px; }

        /* --- MAIN APP STRUCTURE --- */
        header {
            background-color: var(--molloy-maroon);
            color: var(--white);
            padding: 40px 20px 20px 20px;
            text-align: center;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        .header-title { font-size: 12px; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.9; }
        .balance-pill { 
            background: rgba(255, 255, 255, 0.1); 
            border: 1px solid var(--molloy-gold); 
            border-radius: 20px; 
            padding: 8px 20px; 
            margin-top: 15px; 
            display: inline-flex; 
            align-items: center; 
            gap: 10px;
            font-size: 20px;
            font-weight: bold;
            color: var(--molloy-gold);
        }

        /* --- CONTENT VIEWS --- */
        .view-container { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 80px; display: none; }
        .view-container.active { display: block; }

        /* --- QUIZ STYLES --- */
        .question-card { background: var(--white); border-radius: 16px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center; }
        .question-text { font-size: 19px; color: var(--text-dark); margin-bottom: 25px; font-weight: 600; line-height: 1.4; }
        .option-btn { background: white; border: 2px solid var(--gray-light); padding: 16px; border-radius: 10px; font-size: 16px; width: 100%; margin-bottom: 12px; text-align: left; cursor: pointer; color: var(--text-dark); }
        .option-btn.correct { background-color: #d4edda; border-color: #28a745; color: #155724; }
        .option-btn.wrong { background-color: #f8d7da; border-color: #dc3545; color: #721c24; }
        .hidden-option { visibility: hidden; pointer-events: none; }

        .lifelines { display: flex; justify-content: center; gap: 20px; margin-top: 25px; padding-top: 15px; border-top: 1px solid #eee; }
        .lifeline-btn { background: var(--molloy-maroon); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 4px 6px rgba(0,0,0,0.2); }
        .lifeline-btn:disabled { background: #ccc; box-shadow: none; }

        /* --- WALLET STYLES --- */
        .transaction-item { background: white; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid var(--molloy-maroon); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .trans-desc { font-weight: 600; font-size: 14px; color: #555; }
        .trans-amount { color: #28a745; font-weight: bold; }
        .empty-wallet { text-align: center; color: #999; margin-top: 50px; }

        /* --- PROFILE STYLES --- */
        .profile-card { background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center; margin-bottom: 20px; }
        .profile-header { background: var(--molloy-maroon); height: 80px; }
        .profile-pic { width: 80px; height: 80px; background: white; border-radius: 50%; margin: -40px auto 10px; display: flex; align-items: center; justify-content: center; border: 4px solid white; font-size: 30px; color: var(--molloy-maroon); }
        .profile-name { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
        .profile-email { color: #888; font-size: 14px; margin-bottom: 20px; }
        .stat-row { display: flex; border-top: 1px solid #eee; }
        .stat-col { flex: 1; padding: 15px; border-right: 1px solid #eee; }
        .stat-col:last-child { border: none; }
        .stat-val { font-size: 18px; font-weight: bold; color: var(--molloy-maroon); }
        .stat-label { font-size: 12px; color: #888; text-transform: uppercase; }

        /* --- BOTTOM NAV --- */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #eee; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); padding-bottom: max(12px, env(safe-area-inset-bottom)); }
        .nav-item { text-align: center; color: #aaa; font-size: 11px; cursor: pointer; width: 33%; }
        .nav-item.active-tab { color: var(--molloy-maroon); font-weight: bold; }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }

        /* --- TOAST --- */
        #toast { visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 1000; left: 50%; bottom: 100px; transform: translateX(-50%); font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 100px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 100px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>
<body>

    <div id="login-screen" class="screen active" style="display:flex;">
        <div class="login-logo"><i class="fas fa-university"></i></div>
        <div class="login-title">Molloy Business<br>Challenge</div>
        
        <div class="input-group">
            <label>Student Email</label>
            <input type="email" class="login-input" placeholder="alex@molloy.edu" id="email-input">
        </div>
        <div class="input-group">
            <label>Password</label>
            <input type="password" class="login-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </div>

        <button class="btn btn-primary" onclick="performLogin()">Login</button>
        <button class="btn btn-google" onclick="performLogin()">
            <i class="fab fa-google"></i> Sign in with Google
        </button>
    </div>

    <div id="app-screen" class="screen">
        
        <header>
            <div class="header-title">Molloy University</div>
            <div class="balance-pill">
                <i class="fas fa-wallet"></i> <span id="header-balance">0</span> MD
            </div>
        </header>

        <div id="view-quiz" class="view-container active">
            <div style="text-align: center; margin-bottom: 15px; color: #888; font-size: 14px;">
                Level 1: Value Creation
            </div>

            <div class="question-card">
                <div class="question-text" id="question-text">Loading...</div>
                <div id="options-container"></div>
                
                <div class="lifelines">
                    <div>
                        <button class="lifeline-btn" id="btn-5050" onclick="use5050()">50:50</button>
                        <div style="font-size:10px; color:#888; margin-top:5px;">Remove 2</div>
                    </div>
                    <div>
                        <button class="lifeline-btn" id="btn-ask" onclick="askProfessor()"><i class="fas fa-user-graduate"></i></button>
                        <div style="font-size:10px; color:#888; margin-top:5px;">Ask Prof</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-wallet" class="view-container">
            <h2 style="color:var(--text-dark); margin-top:0;">Transaction History</h2>
            <div id="wallet-list">
                <div class="empty-wallet">No transactions yet.<br>Play the quiz to earn Molloy Dollars!</div>
            </div>
        </div>

        <div id="view-profile" class="view-container">
            <div class="profile-card">
                <div class="profile-header"></div>
                <div class="profile-pic"><i class="fas fa-user"></i></div>
                <div class="profile-name" id="profile-name-display">Student Name</div>
                <div class="profile-email" id="profile-email-display">student@molloy.edu</div>
                
                <div class="stat-row">
                    <div class="stat-col">
                        <div class="stat-val" id="profile-balance">0</div>
                        <div class="stat-label">Molloy Dollars</div>
                    </div>
                    <div class="stat-col">
                        <div class="stat-val">Level 1</div>
                        <div class="stat-label">Current Rank</div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary" style="width:100%; background:#eee; color:#333; box-shadow:none;" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Log Out
            </button>
        </div>

        <nav class="bottom-nav">
            <div class="nav-item active-tab" id="tab-quiz" onclick="switchTab('quiz')">
                <i class="fas fa-gamepad"></i> Quiz
            </div>
            <div class="nav-item" id="tab-wallet" onclick="switchTab('wallet')">
                <i class="fas fa-wallet"></i> Wallet
            </div>
            <div class="nav-item" id="tab-profile" onclick="switchTab('profile')">
                <i class="fas fa-user"></i> Profile
            </div>
        </nav>
    </div>

    <div id="toast">Message</div>

    <script>
        /* --- APP DATA --- */
        const questions = [
            { q: "According to 'The Personal MBA', every successful business creates something of...?", options: ["Value", "Cost", "Complexity", "Bureaucracy"], correct: 0, hint: "It is the core concept. Without this, no one pays you." },
            { q: "Which of these is NOT one of the 5 core parts of every business?", options: ["Marketing", "Sales", "Value Delivery", "Office Politics"], correct: 3, hint: "Think about what brings money in versus what wastes time." },
            { q: "What is the term for 'making people want what you have'?", options: ["Accounting", "Marketing", "Operations", "HR"], correct: 1, hint: "It is about getting attention and building interest." }
        ];

        /* --- STATE --- */
        let state = {
            user: "Student",
            email: "student@molloy.edu",
            balance: 0,
            questionIndex: 0,
            locked: false,
            transactions: []
        };

        /* --- LOGIN LOGIC --- */
        function performLogin() {
            const emailInput = document.getElementById('email-input').value;
            if (emailInput.includes('@')) {
                state.email = emailInput;
                let name = emailInput.split('@')[0];
                state.user = name.charAt(0).toUpperCase() + name.slice(1);
            }

            // Update Profile UI
            document.getElementById('profile-name-display').innerText = state.user;
            document.getElementById('profile-email-display').innerText = state.email;

            // Switch Screen
            document.getElementById('login-screen').style.display = 'none'; // Force hide
            document.getElementById('login-screen').classList.remove('active');
            document.getElementById('app-screen').classList.add('active');
            
            loadQuestion();
        }

        function logout() { location.reload(); }

        /* --- TAB SWITCHING --- */
        function switchTab(tabName) {
            // Hide all views
            document.querySelectorAll('.view-container').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active-tab'));

            // Show selected view
            document.getElementById(`view-${tabName}`).classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active-tab');

            if(tabName === 'wallet') renderWallet();
            if(tabName === 'profile') {
                document.getElementById('profile-balance').innerText = state.balance;
            }
        }

        /* --- GAME LOGIC --- */
        function loadQuestion() {
            if (state.questionIndex >= questions.length) {
                document.getElementById('question-text').innerText = "ðŸŽ‰ Level Complete!";
                document.getElementById('options-container').innerHTML = `
                    <div style='color:#666; margin-bottom:20px;'>You earned ${state.balance} Molloy Dollars.</div>
                    <button class='btn btn-primary' onclick='location.reload()'>Restart Demo</button>
                `;
                document.querySelector('.lifelines').style.display = 'none';
                return;
            }

            const data = questions[state.questionIndex];
            document.getElementById('question-text').innerText = data.q;
            
            const container = document.getElementById('options-container');
            container.innerHTML = ""; 

            data.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.id = `opt-${index}`;
                btn.onclick = () => checkAnswer(index, btn);
                container.appendChild(btn);
            });
            state.locked = false;
        }

        function checkAnswer(index, btn) {
            if (state.locked) return;
            state.locked = true;

            const correct = questions[state.questionIndex].correct;
            
            if (index === correct) {
                btn.classList.add('correct');
                btn.innerHTML = '<i class="fas fa-check"></i> ' + btn.innerText;
                addBalance(10, `Level 1: Q${state.questionIndex + 1} Correct`);
                showToast("Correct! +10 MD");
                setTimeout(() => { state.questionIndex++; loadQuestion(); }, 1500);
            } else {
                btn.classList.add('wrong');
                document.getElementById(`opt-${correct}`).classList.add('correct');
                showToast("Incorrect. Moving on...");
                setTimeout(() => { state.questionIndex++; loadQuestion(); }, 2000);
            }
        }

        function addBalance(amount, desc) {
            state.balance += amount;
            state.transactions.unshift({ desc: desc, amount: amount }); // Add to top
            
            // Update UI
            document.getElementById('header-balance').innerText = state.balance;
        }

        function renderWallet() {
            const container = document.getElementById('wallet-list');
            if (state.transactions.length === 0) {
                container.innerHTML = '<div class="empty-wallet">No transactions yet.<br>Play the quiz to earn Molloy Dollars!</div>';
                return;
            }
            
            container.innerHTML = state.transactions.map(t => `
                <div class="transaction-item">
                    <div class="trans-desc">${t.desc}</div>
                    <div class="trans-amount">+${t.amount} MD</div>
                </div>
            `).join('');
        }

        /* --- LIFELINES --- */
        function use5050() {
            const btn = document.getElementById('btn-5050');
            if (btn.disabled || state.locked) return;
            
            const correct = questions[state.questionIndex].correct;
            let removed = 0;
            for (let i = 0; i < 4; i++) {
                if (i !== correct && removed < 2) {
                    document.getElementById(`opt-${i}`).classList.add('hidden-option');
                    removed++;
                }
            }
            btn.disabled = true; btn.style.opacity = "0.5";
        }

        function askProfessor() {
            const btn = document.getElementById('btn-ask');
            if (btn.disabled || state.locked) return;
            showToast("ðŸ‘¨â€ðŸ« Prof. O'Keefe says: " + questions[state.questionIndex].hint);
            btn.disabled = true; btn.style.opacity = "0.5";
        }

        function showToast(msg) {
            const x = document.getElementById("toast");
            x.innerText = msg;
            x.className = "show";
            setTimeout(() => { x.className = x.className.replace("show", ""); }, 3000);
        }
    </script>
</body>
</html>
